<!--Main Navigation-->
<header>
    <!-- Sidebar -->
    {% set menuItems = getMenuItems() %}
    {% set currentPath = path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')) %}

    <h1>{{currentPath}}</h1>
    <nav id="sidebarMenu" class="d-lg-block sidebar collapse">
        <div class="position-sticky">
            <div class="list-group list-group-flush mx-3 mt-4">
                {% for menuItem in menuItems %}
                    {% if not menuItem.disabled %}
                        {% set isCurrent = currentPath == menuItem.route %}
                        <a
                            href="{{ menuItem.route }}"
                            class="list-group-item list-group-item-action py-2 {% if isCurrent %}active{% endif %}"
                            data-mdb-ripple-init
                            {% if isCurrent %}aria-current="true"{% endif %}
                        >
                            <i class="{{ menuItem.icon }} me-3"></i>
                            <span>{{ menuItem.label }}</span>
                        </a>
                    {% else %}
                        <a
                            href="#"
                            class="list-group-item list-group-item-action py-2 disabled"
                        >
                            <i class="{{ menuItem.icon }} me-3"></i>
                            <span>{{ menuItem.label }}</span>
                        </a>
                    {% endif %}
                {% endfor %}

                <a href="#" class="list-group-item list-group-item-action py-2" data-mdb-ripple-init>
                    <i class="fas fa-globe fa-fw me-3"></i>
                    <span>Seasons</span>
                </a>
                <a href="#" class="list-group-item list-group-item-action py-2" data-mdb-ripple-init>
                    <i class="fas fa-calendar fa-fw me-3"></i>
                    <span>Races</span>
                </a>
                <a href="#" class="list-group-item list-group-item-action py-2" data-mdb-ripple-init>
                    <i class="fas fa-building fa-fw me-3"></i>
                    <span>Teams</span>
                </a>
                <a href="#" class="list-group-item list-group-item-action py-2" data-mdb-ripple-init>
                    <i class="fas fa-users fa-fw me-3"></i>
                    <span>Drivers</span>
                </a>
                <a href="#" class="list-group-item list-group-item-action py-2" data-mdb-ripple-init>
                    <i class="fas fa-chart-bar fa-fw me-3"></i>
                    <span>Predictions</span>
                </a>
            </div>
        </div>
    </nav>
    <!-- Sidebar -->

    <!-- Navbar -->
    <nav id="main-navbar" class="navbar navbar-expand-lg bg-body-tertiary fixed-top">
        <!-- Container wrapper -->
        <div class="container-fluid">
            <!-- Toggle button -->
            <button
                class="navbar-toggler"
                type="button"
                data-mdb-collapse-init
                data-mdb-target="#sidebarMenu"
                aria-controls="sidebarMenu"
                aria-expanded="false"
                aria-label="Toggle navigation"
            >
                <i class="fas fa-bars"></i>
            </button>

            <!-- Brand -->
            <a class="navbar-brand" href="#">
                <img src="https://mdbootstrap.com/img/logo/mdb-transaprent-noshadows.png" height="25" alt="" loading="lazy" />
            </a>
            <!-- Search form -->
            <form class="d-none d-md-flex input-group w-auto my-auto">
                <input
                    autocomplete="off"
                    type="search"
                    class="form-control rounded"
                    placeholder='Search (ctrl + "/" to focus)'
                    style="min-width: 225px"
                />
                <span class="input-group-text border-0">
                    <i class="fas fa-search"></i>
                </span>
            </form>

            <!-- Right links -->
            <ul class="navbar-nav ms-auto d-flex flex-row">
                <!-- Notification dropdown -->
                {# <li class="nav-item dropdown">
                    <a
                        class="nav-link me-3 me-lg-0 dropdown-toggle hidden-arrow"
                        href="#"
                        id="navbarDropdownMenuLink"
                        role="button"
                        data-mdb-dropdown-init
                        aria-expanded="false"
                    >
                        <i class="fas fa-bell"></i>
                        <span class="badge rounded-pill badge-notification bg-danger">1</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuLink">
                        <li><a class="dropdown-item" href="#">Some news</a></li>
                        <li><a class="dropdown-item" href="#">Another news</a></li>
                        <li>
                        <a class="dropdown-item" href="#">Something else</a>
                        </li>
                    </ul>
                </li> #}

                <!-- Avatar -->
                <li class="nav-item dropdown">
                    <a
                        class="nav-link dropdown-toggle hidden-arrow d-flex"
                        href="#"
                        id="navbarDropdownMenuLink"
                        role="button"
                        data-mdb-dropdown-init
                        aria-expanded="false"
                    >
                        <img
                            id="navbarAvatarImg"
                            height="32"
                            alt=""
                            loading="lazy"
                        />
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuLink">
                        <li><a class="dropdown-item" href="#">Logout</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <!-- Container wrapper -->
    </nav>
    <!-- Navbar -->
</header>
<!--Main Navigation-->

{% block javascripts %}
    <script>
        $(function() {
            const user = 'Morty';
            const navbarAvatarImg = $('#navbarAvatarImg').attr('src', `https://api.dicebear.com/9.x/thumbs/svg?seed=${user}&radius=40`);
        })
    </script>
{% endblock %}
